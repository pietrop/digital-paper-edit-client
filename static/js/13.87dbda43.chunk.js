(this["webpackJsonp@pietrop/digital-paper-edit-client"]=this["webpackJsonp@pietrop/digital-paper-edit-client"]||[]).push([[13,4],{108:function(e,t,a){"use strict";var n=a(97),r=a.n(n),s=a(18),i=a(19),o=a(206),c=a.n(o),l=["GET","POST","PUT","DELETE"],u=function(e){if(!l.includes(e))throw new Error("Wrong method passed ".concat(e," - should be one of ").concat(l))},p=function(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return"PUT"===e?t={method:e,mode:"cors",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}}:"POST"===e?(t={method:e},"json"===n?(t.headers={"Content-Type":"application/json"},t.body=JSON.stringify(a)):t.body=a):t={method:e,mode:"cors"},t};var d=function(e){var t,a,n,s,i=arguments;return r.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=i.length>1&&void 0!==i[1]?i[1]:"GET",a=i.length>2&&void 0!==i[2]?i[2]:{},n=i.length>3?i[3]:void 0,u(t),s=p(t,a,n),o.next=7,r.a.awrap(fetch(e,s));case 7:return o.abrupt("return",o.sent);case 8:case"end":return o.stop()}}))},h=function(){function e(){var t=this;Object(s.a)(this,e),this.projectsIdUrl=function(e){return"".concat(t.projectsUrl,"/").concat(e)},this.transcriptsUrl=function(e){return"".concat(t.projectsIdUrl(e),"/transcripts")},this.transcriptsIdUrl=function(e,a,n){var r=n?"?".concat(c.a.stringify(n)):"";return"".concat(t.transcriptsUrl(e),"/").concat(a).concat(r).trim()},this.paperEditsUrl=function(e){return"".concat(t.projectsIdUrl(e),"/paperedits")},this.paperEditsIdUrl=function(e,a){return"".concat(t.projectsIdUrl(e),"/paperedits/").concat(a)},this.annotationsUrl=function(e,a){return"".concat(t.transcriptsIdUrl(e,a),"/annotations")},this.annotationsIdUrl=function(e,a,n){return"".concat(t.transcriptsIdUrl(e,a),"/annotations/").concat(n)},this.labelsUrl=function(e){return"".concat(t.projectsIdUrl(e),"/labels")},this.labelsIdUrl=function(e,a){return"".concat(t.projectsIdUrl(e),"/labels/").concat(a)},this.baseUrl=window.env.API_URL,window.env.API_URL=null,this.projectsUrl="".concat(this.baseUrl,"/api/projects")}return Object(i.a)(e,[{key:"getAllProjects",value:function(){var e,t;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(d(this.projectsUrl));case 2:return e=a.sent,a.next=5,r.a.awrap(e.json());case 5:return t=a.sent,a.abrupt("return",t.projects);case 7:case"end":return a.stop()}}),null,this)}},{key:"getProject",value:function(e){var t,a;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.a.awrap(d(this.projectsIdUrl(e)));case 2:return t=n.sent,n.next=5,r.a.awrap(t.json());case 5:return a=n.sent,n.abrupt("return",a);case 7:case"end":return n.stop()}}),null,this)}},{key:"createProject",value:function(e){var t;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(d(this.projectsUrl,"POST",e,"json"));case 2:return t=a.sent,a.next=5,r.a.awrap(t.json());case 5:return a.abrupt("return",a.sent);case 6:case"end":return a.stop()}}),null,this)}},{key:"updateProject",value:function(e,t){var a,n;return r.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,r.a.awrap(d(this.projectsIdUrl(e),"PUT",t));case 2:return a=s.sent,s.next=5,r.a.awrap(a.json());case 5:return n=s.sent,s.abrupt("return",n);case 7:case"end":return s.stop()}}),null,this)}},{key:"deleteProject",value:function(e){var t;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(d(this.projectsIdUrl(e),"DELETE"));case 2:return t=a.sent,a.abrupt("return",t);case 4:case"end":return a.stop()}}),null,this)}},{key:"getTranscripts",value:function(e){var t,a;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.a.awrap(d(this.transcriptsUrl(e)));case 2:return t=n.sent,n.next=5,r.a.awrap(t.json());case 5:return a=n.sent,n.abrupt("return",a);case 7:case"end":return n.stop()}}),null,this)}},{key:"createTranscript",value:function(e,t){var a,n;return r.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,r.a.awrap(d(this.transcriptsUrl(e),"POST",t));case 2:return a=s.sent,s.next=5,r.a.awrap(a.json());case 5:return n=s.sent,s.abrupt("return",n);case 7:case"end":return s.stop()}}),null,this)}},{key:"getTranscript",value:function(e,t,a){var n,s,i;return r.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,r.a.awrap(d(this.transcriptsIdUrl(e,t,a)));case 2:return n=o.sent,o.next=5,r.a.awrap(n.json());case 5:return s=o.sent,o.next=8,r.a.awrap(this.getProject(e));case 8:return i=o.sent,s.projectTitle=i.project.title,s.transcriptTitle=s.title,delete s.title,o.abrupt("return",s);case 13:case"end":return o.stop()}}),null,this)}},{key:"updateTranscript",value:function(e,t,a,n){var s;return r.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,r.a.awrap(d(this.transcriptsIdUrl(e,t,a),"PUT",n));case 2:return s=i.sent,i.abrupt("return",s);case 4:case"end":return i.stop()}}),null,this)}},{key:"deleteTranscript",value:function(e,t){var a;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.a.awrap(d(this.transcriptsIdUrl(e,t),"DELETE"));case 2:return a=n.sent,n.abrupt("return",a);case 4:case"end":return n.stop()}}),null,this)}},{key:"getAllAnnotations",value:function(e,t){var a,n;return r.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,r.a.awrap(fetch(this.annotationsUrl(e,t)));case 2:return a=s.sent,s.next=5,r.a.awrap(a.json());case 5:return n=s.sent,s.abrupt("return",n);case 7:case"end":return s.stop()}}),null,this)}},{key:"getAnnotation",value:function(e,t,a){var n,s;return r.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,r.a.awrap(d(this.annotationsIdUrl(e,t,a)));case 2:return n=i.sent,i.next=5,r.a.awrap(n.json());case 5:return s=i.sent,i.abrupt("return",s);case 7:case"end":return i.stop()}}),null,this)}},{key:"createAnnotation",value:function(e,t,a){var n;return r.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,r.a.awrap(d(this.annotationsUrl(e,t),"POST",a,"json"));case 2:return n=s.sent,s.next=5,r.a.awrap(n.json());case 5:return s.abrupt("return",s.sent);case 6:case"end":return s.stop()}}),null,this)}},{key:"updateAnnotation",value:function(e,t,a,n){var s,i;return r.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,r.a.awrap(d(this.annotationsIdUrl(e,t,a),"PUT",n));case 2:return s=o.sent,o.next=5,r.a.awrap(s.json());case 5:return i=o.sent,o.abrupt("return",i);case 7:case"end":return o.stop()}}),null,this)}},{key:"deleteAnnotation",value:function(e,t,a){var n,s;return r.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,r.a.awrap(d(this.annotationsIdUrl(e,t,a),"DELETE"));case 2:return n=i.sent,i.next=5,r.a.awrap(n.json());case 5:return s=i.sent,i.abrupt("return",s);case 7:case"end":return i.stop()}}),null,this)}},{key:"getAllLabels",value:function(e){var t,a;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.a.awrap(fetch(this.labelsUrl(e)));case 2:return t=n.sent,n.next=5,r.a.awrap(t.json());case 5:return a=n.sent,n.abrupt("return",a);case 7:case"end":return n.stop()}}),null,this)}},{key:"getLabel",value:function(e,t){var a,n;return r.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,r.a.awrap(d(this.labelsIdUrl(e,t)));case 2:return a=s.sent,s.next=5,r.a.awrap(a.json());case 5:return n=s.sent,s.abrupt("return",n);case 7:case"end":return s.stop()}}),null,this)}},{key:"createLabel",value:function(e,t){var a,n;return r.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,r.a.awrap(d(this.labelsUrl(e),"POST",t,"json"));case 2:return a=s.sent,s.next=5,r.a.awrap(a.json());case 5:return n=s.sent,s.abrupt("return",n);case 7:case"end":return s.stop()}}),null,this)}},{key:"updateLabel",value:function(e,t,a){var n,s;return r.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,r.a.awrap(d(this.labelsIdUrl(e,t),"PUT",a));case 2:return n=i.sent,i.next=5,r.a.awrap(n.json());case 5:return s=i.sent,i.abrupt("return",s);case 7:case"end":return i.stop()}}),null,this)}},{key:"deleteLabel",value:function(e,t){var a,n;return r.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,r.a.awrap(d(this.labelsIdUrl(e,t),"DELETE"));case 2:return a=s.sent,s.next=5,r.a.awrap(a.json());case 5:return n=s.sent,s.abrupt("return",n);case 7:case"end":return s.stop()}}),null,this)}},{key:"getAllPaperEdits",value:function(e){var t,a;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.a.awrap(d(this.paperEditsUrl(e)));case 2:return t=n.sent,n.next=5,r.a.awrap(t.json());case 5:return a=n.sent,n.abrupt("return",a.paperedits);case 7:case"end":return n.stop()}}),null,this)}},{key:"getPaperEdit",value:function(e,t){var a,n;return r.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,r.a.awrap(d(this.paperEditsIdUrl(e,t)));case 2:return a=s.sent,s.next=5,r.a.awrap(a.json());case 5:return n=s.sent,s.abrupt("return",n);case 7:case"end":return s.stop()}}),null,this)}},{key:"createPaperEdit",value:function(e,t){var a;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.a.awrap(d(this.paperEditsUrl(e),"POST",t,"json"));case 2:return a=n.sent,n.next=5,r.a.awrap(a.json());case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}}),null,this)}},{key:"updatePaperEdit",value:function(e,t,a){var n,s;return r.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,r.a.awrap(d(this.paperEditsIdUrl(e,t),"PUT",a));case 2:return n=i.sent,i.next=5,r.a.awrap(n.json());case 5:return s=i.sent,i.abrupt("return",s);case 7:case"end":return i.stop()}}),null,this)}},{key:"deletePaperEdit",value:function(e,t){var a;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.a.awrap(d(this.paperEditsIdUrl(e,t),"DELETE"));case 2:return a=n.sent,n.abrupt("return",a);case 4:case"end":return n.stop()}}),null,this)}},{key:"getTranscriptLabelsAnnotations",value:function(e,t){var a,n,s,i;return r.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,r.a.awrap(this.getTranscript(e,t));case 2:return a=o.sent,o.next=5,r.a.awrap(this.getAllLabels(e,t));case 5:return n=o.sent,o.next=8,r.a.awrap(this.getAllAnnotations(e,t));case 8:return s=o.sent,i={transcriptId:t,projectId:e,projectTitle:a.projectTitle,transcriptTitle:a.transcriptTitle,url:a.url,labels:n.labels,transcript:a.transcript,annotations:s.annotations},o.abrupt("return",i);case 11:case"end":return o.stop()}}),null,this)}},{key:"getProgrammeScriptAndTranscripts",value:function(e,t){var a,n,s,i,o,c,l,u=this;return r.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,r.a.awrap(this.getTranscripts(e));case 2:return a=p.sent,p.next=5,r.a.awrap(Promise.all(a.transcripts.map((function(t){return u.getTranscript(e,t.id)}))));case 5:return n=p.sent,p.next=8,r.a.awrap(Promise.all(a.transcripts.map((function(t){return u.getAllAnnotations(e,t.id)}))));case 8:return s=p.sent,n.forEach((function(e){var t=s.find((function(t){return t.transcriptId===e.id}));e.annotations=t?t.annotations:[]})),p.next=12,r.a.awrap(this.getPaperEdit(e,t));case 12:return i=p.sent,p.next=15,r.a.awrap(this.getProject(e));case 15:return o=p.sent,p.next=18,r.a.awrap(this.getAllLabels(e));case 18:return c=p.sent,l={programmeScript:i.programmeScript,project:o.project,transcripts:n,labels:c.labels},p.abrupt("return",l);case 21:case"end":return p.stop()}}),null,this)}},{key:"exportVideo",value:function(e,t){return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new Promise((function(a,n){a({input:e,output:"~/Desktop/".concat(t),ffmpegPath:""})})));case 1:case"end":return a.stop()}}))}},{key:"exportAudio",value:function(e,t,a,n,s){return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new Promise((function(a,n){a({input:e,output:"~/Desktop/".concat(t),ffmpegPath:""})})));case 1:case"end":return a.stop()}}))}}]),e}(),m=function(){function e(){Object(s.a)(this,e)}return Object(i.a)(e,[{key:"getAllProjects",value:function(){var e,t,a;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.a.awrap(fetch("db/projects.json"));case 2:return e=n.sent,n.next=5,r.a.awrap(e.json());case 5:if(t=n.sent,0,0===t.length){n.next=10;break}return a=t.map((function(e){return e.id=e._id,e})),n.abrupt("return",a);case 10:case"end":return n.stop()}}))}},{key:"getProject",value:function(e){var t,a,n;return r.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,r.a.awrap(fetch("db/projects.json"));case 2:return t=s.sent,s.next=5,r.a.awrap(t.json());case 5:return a=s.sent,n=a.find((function(t){return t._id===e})),s.abrupt("return",{status:"ok",project:n});case 8:case"end":return s.stop()}}))}},{key:"createProject",value:function(e){return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return alert("Not implemented in demo mode"),e.abrupt("return",{status:"false"});case 2:case"end":return e.stop()}}))}},{key:"updateProject",value:function(e,t){return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return alert("Not implemented in demo mode"),e.abrupt("return",{status:"false"});case 2:case"end":return e.stop()}}))}},{key:"deleteProject",value:function(e){return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return alert("Not implemented in demo mode"),e.abrupt("return",{ok:!1,status:"false",project:{}});case 2:case"end":return e.stop()}}))}},{key:"getTranscripts",value:function(e){var t,a;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.a.awrap(fetch("db/transcripts.json"));case 2:return t=n.sent,n.next=5,r.a.awrap(t.json());case 5:return a=(a=(a=n.sent).filter((function(t){return t.projectId===e}))).map((function(e){return e.id=e._id,e})),n.abrupt("return",{transcripts:a});case 9:case"end":return n.stop()}}))}},{key:"createTranscript",value:function(e,t,a){return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return alert("Not implemented in demo mode"),e.abrupt("return",{status:"false"});case 2:case"end":return e.stop()}}))}},{key:"getTranscript",value:function(e,t,a){var n,s,i,o;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(fetch("db/transcripts.json"));case 2:return n=a.sent,a.next=5,r.a.awrap(n.json());case 5:return s=a.sent,(i=s.find((function(e){return e._id===t}))).id=i._id,a.next=10,r.a.awrap(this.getProject(e));case 10:return o=a.sent,i.projectTitle=o.project.title,i.transcriptTitle=i.title,a.abrupt("return",i);case 14:case"end":return a.stop()}}),null,this)}},{key:"updateTranscript",value:function(e,t,a,n){return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return alert("Not implemented in demo mode"),e.abrupt("return",{ok:!1});case 2:case"end":return e.stop()}}))}},{key:"deleteTranscript",value:function(e,t){return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return alert("Not implemented in demo mode"),e.abrupt("return",{ok:!1,status:"false"});case 2:case"end":return e.stop()}}))}},{key:"getAllAnnotations",value:function(e,t){var a,n;return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.a.awrap(fetch("db/annotations.json"));case 2:return a=e.sent,e.next=5,r.a.awrap(a.json());case 5:return n=(n=(n=e.sent).filter((function(e){return e.transcriptId===t})))?n.map((function(e){return e.id=e._id,e})):[],e.abrupt("return",{annotations:n});case 9:case"end":return e.stop()}}))}},{key:"getAnnotation",value:function(e,t,a){var n,s,i;return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.a.awrap(fetch("db/annotations.json"));case 2:return n=e.sent,e.next=5,r.a.awrap(n.json());case 5:return s=e.sent,i=s[0],e.abrupt("return",{annotation:i});case 8:case"end":return e.stop()}}))}},{key:"createAnnotation",value:function(e,t,a){return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return alert("Not implemented in demo mode"),e.abrupt("return",{ok:!1,status:"false",annotation:[]});case 2:case"end":return e.stop()}}))}},{key:"deleteAnnotation",value:function(e,t,a){return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return alert("Not implemented in demo mode"),e.abrupt("return",{ok:!1,status:"false"});case 2:case"end":return e.stop()}}))}},{key:"getAllLabels",value:function(e){var t,a,n;return r.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,r.a.awrap(fetch("db/labels.json"));case 2:return t=s.sent,s.next=5,r.a.awrap(t.json());case 5:return a=s.sent,n=a[0],(a=a.filter((function(t){return t.projectId===e}))).unshift(n),a||(a=[]),s.abrupt("return",{ok:!0,status:"ok",labels:a});case 11:case"end":return s.stop()}}))}},{key:"getLabel",value:function(e,t){var a,n,s;return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.a.awrap(fetch("db/labels.json"));case 2:return a=e.sent,e.next=5,r.a.awrap(a.json());case 5:return n=e.sent,s=n[0],e.abrupt("return",{ok:!0,status:"ok",label:s});case 8:case"end":return e.stop()}}))}},{key:"createLabel",value:function(e,t){return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return alert("Not implemented in demo mode"),e.abrupt("return",{ok:!1,status:"false"});case 2:case"end":return e.stop()}}))}},{key:"updateLabel",value:function(e,t,a){return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return alert("Not implemented in demo mode"),e.abrupt("return",{ok:!1,status:"false"});case 2:case"end":return e.stop()}}))}},{key:"deleteLabel",value:function(e,t){return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return alert("Not implemented in demo mode"),e.abrupt("return",{status:"false"});case 2:case"end":return e.stop()}}))}},{key:"getAllPaperEdits",value:function(e){var t,a,n;return r.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,r.a.awrap(fetch("db/paperedits.json"));case 2:return t=s.sent,s.next=5,r.a.awrap(t.json());case 5:return a=(a=s.sent).filter((function(t){return t.projectId===e})),(n={}).paperedits=[],n.paperedits=a,n.paperedits&&(n.paperedits=n.paperedits.map((function(e){return e.id=e._id,e}))),s.abrupt("return",n.paperedits);case 12:case"end":return s.stop()}}))}},{key:"getPaperEdit",value:function(e,t){var a,n,s,i;return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t,e.next=3,r.a.awrap(fetch("db/paperedits.json"));case 3:return n=e.sent,e.next=6,r.a.awrap(n.json());case 6:return s=e.sent,(i=s.find((function(e){return e.id===a})))||(new Error("No paper edit found").statusCode=404),e.abrupt("return",{ok:!0,status:"ok",programmeScript:i});case 10:case"end":return e.stop()}}))}},{key:"createPaperEdit",value:function(e,t){return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return alert("Not implemented in demo mode"),e.abrupt("return",{ok:!1,status:"false"});case 2:case"end":return e.stop()}}))}},{key:"updatePaperEdit",value:function(e,t,a){return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return alert("Not implemented in demo mode"),e.abrupt("return",{ok:!0,status:"false"});case 2:case"end":return e.stop()}}))}},{key:"deletePaperEdit",value:function(e,t){return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return alert("Not implemented in demo mode"),e.abrupt("return",{ok:!1,status:"false"});case 2:case"end":return e.stop()}}))}},{key:"getTranscriptLabelsAnnotations",value:function(e,t){var a,n,s,i;return r.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,r.a.awrap(this.getTranscript(e,t));case 2:return a=o.sent,o.next=5,r.a.awrap(this.getAllLabels(e,t));case 5:return n=o.sent,o.next=8,r.a.awrap(this.getAllAnnotations(e,t));case 8:return s=o.sent,i={transcriptId:t,projectId:e,projectTitle:a.projectTitle,transcriptTitle:a.transcriptTitle,url:a.url,labels:n.labels,transcript:a.transcript,annotations:s.annotations},o.abrupt("return",i);case 11:case"end":return o.stop()}}),null,this)}},{key:"getProgrammeScriptAndTranscripts",value:function(e,t){var a,n,s,i,o,c,l,u=this;return r.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,r.a.awrap(this.getTranscripts(e));case 2:return a=p.sent,p.next=5,r.a.awrap(Promise.all(a.transcripts.map((function(t){return u.getTranscript(e,t.id)}))));case 5:return n=p.sent,p.next=8,r.a.awrap(Promise.all(a.transcripts.map((function(t){return u.getAllAnnotations(e,t.id)}))));case 8:return s=p.sent,n.forEach((function(e){var t=s.find((function(t){return t.transcriptId===e.id}));e.annotations=t?t.annotations:[]})),p.next=12,r.a.awrap(this.getPaperEdit(e,t));case 12:return i=p.sent,p.next=15,r.a.awrap(this.getProject(e));case 15:return o=p.sent,p.next=18,r.a.awrap(this.getAllLabels(e));case 18:return c=p.sent,l={programmeScript:i.programmeScript,project:o.project,transcripts:n,labels:c.labels},p.abrupt("return",l);case 21:case"end":return p.stop()}}),null,this)}}]),e}(),f=a(120),v=Object(f.a)();t.a=function(){if("demo"===v){console.log("API Wrapper demo time!");var e=new m;return Object.freeze(e),e}if("browser"===v){var t=new h;return Object.freeze(t),t}if("electron"===v){var a=new(0,window.ElectronWrapper);return Object.freeze(a),a}if("cep"===v){var n=new(0,window.AdobeCEPWrapper);return Object.freeze(n),n}}()},120:function(e,t,a){"use strict";function n(){return void 0===window.process?"demo":void 0!==window.process.versions.electron?(console.debug("In Electron Enviroment"),"electron"):void 0!==window.process.versions.cep?(console.debug("In Adobe CEP Environment"),"cep"):void console.error("couldn't determine the js environment")}t.a=n},133:function(e,t,a){"use strict";var n=a(18),r=a(19),s=a(21),i=a(20),o=a(22),c=a(0),l=a.n(c),u=a(273),p=a(142),d=function(e){function t(){return Object(n.a)(this,t),Object(s.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.items.map((function(e,t){return e.link?l.a.createElement(p.LinkContainer,{key:t,to:e.link},l.a.createElement(u.a.Item,null,e.name)):l.a.createElement(u.a.Item,{key:t,active:!0},e.name)}));return l.a.createElement(l.a.Fragment,null,l.a.createElement("style",{scoped:!0},"\n        .breadcrumb{ \n          background-color: ".concat(this.props.backgroundColor,";\n          ").concat(this.props.backgroundColor?" margin: 0px":""," \n          }\n        ")),l.a.createElement("div",null,l.a.createElement(u.a,null,e)))}}]),t}(c.Component);t.a=d},145:function(e,t,a){"use strict";t.a=function(e,t){return e.toLowerCase().trim().includes(t.toLowerCase().trim())}},146:function(e,t,a){"use strict";var n=a(18),r=a(19),s=a(21),i=a(20),o=a(22),c=a(0),l=a.n(c),u=a(125),p=a(131),d=a(91),h=a(94),m=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(s.a)(this,Object(i.a)(t).call(this,e))).handleSearch=function(e){var t=e.target.value;a.props.handleSearch(t)},a.handleShowSearchBar=function(){a.setState((function(e){return{showSearchInput:!e.showSearchInput}}))},a.state={showSearchInput:!1},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return l.a.createElement(u.a,{className:"mb-3"},l.a.createElement(u.a.Prepend,{onClick:this.handleShowSearchBar},l.a.createElement(u.a.Text,{id:"basic-addon2"},l.a.createElement(d.a,{icon:h.E}))),l.a.createElement(p.a,{style:{display:this.state.showSearchInput?"":"none"},onChange:this.handleSearch,placeholder:"Search","aria-label":"search","aria-describedby":"search"}))}}]),t}(l.a.Component);t.a=m},167:function(e,t,a){"use strict";var n=a(18),r=a(19),s=a(21),i=a(20),o=a(22),c=a(0),l=a.n(c),u=a(110),p=a(107),d=a(93),h=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(s.a)(this,Object(i.a)(t).call(this,e))).handleTitleChange=function(e){a.setState({title:e.target.value})},a.handleDescriptionChange=function(e){a.setState({description:e.target.value})},a.state={title:a.props.title,description:a.props.description,validated:!1,id:a.props.id},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"handleSubmit",value:function(e){var t=e.currentTarget;if(t.checkValidity()||(e.preventDefault(),e.stopPropagation(),this.setState({validated:!0})),t.checkValidity()){e.preventDefault(),e.stopPropagation();var a={title:this.state.title,description:this.state.description,id:this.state.id};this.props.handleSaveForm(a)}}},{key:"render",value:function(){var e=this;return l.a.createElement(p.a,{noValidate:!0,validated:this.state.validated,onSubmit:function(t){return e.handleSubmit(t)}},l.a.createElement(p.a.Group,{controlId:"formBasicEmail"},l.a.createElement(p.a.Label,null,"Title "),l.a.createElement(p.a.Control,{required:!0,type:"text",placeholder:"Enter a project title",value:this.state.title,onChange:this.handleTitleChange}),l.a.createElement(p.a.Text,{className:"text-muted"},"Chose a title"),l.a.createElement(p.a.Control.Feedback,null,"Looks good!"),l.a.createElement(p.a.Control.Feedback,{type:"invalid"},"Please chose a title")),l.a.createElement(p.a.Group,{controlId:"formBasicEmail"},l.a.createElement(p.a.Label,null,"Description "),l.a.createElement(p.a.Control,{type:"text",placeholder:"Enter a project description",value:this.state.description,onChange:this.handleDescriptionChange}),l.a.createElement(p.a.Text,{className:"text-muted"},"Chose an optional description"),l.a.createElement(p.a.Control.Feedback,null,"Looks good!"),l.a.createElement(p.a.Control.Feedback,{type:"invalid"},"Please chose a description")),l.a.createElement(u.a.Footer,null,l.a.createElement(d.a,{variant:"primary",type:"submit"},"Save")))}}]),t}(c.Component),m=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(s.a)(this,Object(i.a)(t).call(this,e))).handleClose=function(){a.props.handleCloseModal()},a.state={title:"title"},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return l.a.createElement(u.a,{show:this.props.show,onHide:this.handleClose},l.a.createElement(u.a.Header,{closeButton:!0},l.a.createElement(u.a.Title,null,this.props.modalTitle)),l.a.createElement(u.a.Body,null,l.a.createElement(h,{title:this.props.title,description:this.props.description,id:this.props.id,handleSaveForm:this.props.handleSaveForm})))}}]),t}(l.a.Component);t.a=m},197:function(e,t,a){"use strict";var n=a(18),r=a(19),s=a(21),i=a(20),o=a(22),c=a(0),l=a.n(c),u=a(113),p=a(130),d=a(30),h=a(92),m=a(93),f=a(142),v=a(91),b=a(94),w=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(o)))).handleDelete=function(){!0===confirm("Click OK if you wish to delete, cancel if you don't")?a.props.handleDelete&&a.props.handleDelete(a.props.id):alert("All is good, it was not deleted")},a.handleEdit=function(){a.props.handleEdit(a.props.id)},a.showLinkPath=function(){return a.props.showLinkPath(a.props.id)},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return l.a.createElement(u.a.Item,null,l.a.createElement(d.a,null,l.a.createElement(f.LinkContainer,{to:this.showLinkPath(),style:{cursor:"pointer"}},l.a.createElement(h.a,{xs:8,sm:10,md:10,ld:10,xl:10},l.a.createElement(p.a.Title,null,this.props.icon," ",l.a.createElement("a",{href:"#/".concat(this.showLinkPath())},this.props.title)))),l.a.createElement(h.a,{xs:2,sm:1,md:1,ld:1,xl:1},l.a.createElement(p.a.Link,null,l.a.createElement(m.a,{onClick:this.handleEdit,variant:"secondary",size:"sm"},l.a.createElement(v.a,{icon:b.B})))),l.a.createElement(h.a,{xs:2,sm:1,md:1,ld:1,xl:1},l.a.createElement(p.a.Link,null,l.a.createElement(m.a,{onClick:this.handleDelete,variant:"secondary",size:"sm"},l.a.createElement(v.a,{icon:b.N}))))),l.a.createElement(f.LinkContainer,{to:this.showLinkPath(),style:{cursor:"pointer"}},l.a.createElement(d.a,null,l.a.createElement(h.a,{xs:10,sm:11,md:11,ld:11,xl:11},l.a.createElement(p.a.Subtitle,{className:"mb-2 text-muted"},this.props.description)))))}}]),t}(c.Component),E=function(e){function t(){return Object(n.a)(this,t),Object(s.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props.items.map((function(t){return t.display?l.a.createElement(w,{key:t.id,id:t.id,title:t.title,icon:e.props.icon,description:t.description,handleEdit:e.props.handleEdit,handleDelete:e.props.handleDelete,showLinkPath:e.props.showLinkPath}):null})).filter((function(e){return null!==e}));return l.a.createElement(l.a.Fragment,null,l.a.createElement(u.a,{style:{height:"75vh",overflow:"scroll"}},t))}}]),t}(l.a.Component),j=a(145),y=a(146),g=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(s.a)(this,Object(i.a)(t).call(this,e))).handleSearch=function(e){var t=a.props.items.filter((function(t){return Object(j.a)(t.title,e)||Object(j.a)(t.description,e)?(t.display=!0,t):(t.display=!1,t)}));a.props.handleUpdateList(t)},a.handleShowSearchBar=function(){a.setState((function(e){return{showSearchInput:!e.showSearchInput}}))},a.state={showSearchInput:!1},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e;return null!==this.props.items&&0!==this.props.items.length&&(e=l.a.createElement(y.a,{handleSearch:this.handleSearch})),l.a.createElement(l.a.Fragment,null,l.a.createElement(d.a,null,l.a.createElement(h.a,{sm:9,md:9,ld:9,xl:9},e),l.a.createElement(h.a,{xs:12,sm:3,md:3,ld:3,xl:3},l.a.createElement(m.a,{onClick:this.props.handleShowCreateNewItemForm,variant:"secondary",size:"sm",block:!0},"New ",this.props.model))),this.props.items&&0===this.props.items.length?l.a.createElement("i",null,"There are no ",this.props.model,", create a new one to get started"):null,this.props.items?l.a.createElement(E,{icon:this.props.icon,items:this.props.items,handleEdit:this.props.handleEdit,handleDelete:this.props.handleDelete,showLinkPath:this.props.showLinkPath}):null)}}]),t}(l.a.Component);t.a=g},207:function(e,t,a){},597:function(e,t,a){"use strict";a.r(t);var n=a(97),r=a.n(n),s=a(18),i=a(19),o=a(21),c=a(20),l=a(22),u=a(0),p=a.n(u),d=a(24),h=a(556),m=a(173),f=a(30),v=a(92),b=a(133),w=a(112),E=a(46),j=a(94),y=a(91),g=a(146),x=a(93),k=a(113),S=a(130),I=a(292),C=a(16),T=a(293),O=a(554),P=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(o.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).handleDelete=function(){!0===confirm("Click OK if you wish to delete, cancel if you don't")?a.props.handleDelete&&a.props.handleDelete(a.props.id):alert("All is good, it was not deleted")},a.handleEdit=function(){a.props.handleEdit(a.props.id)},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e,t;"error"===this.props.status&&(e="danger"),"in-progress"===this.props.status&&(e="info"),"done"===this.props.status&&(e="success");var a=p.a.createElement("a",{href:"#".concat(this.props.showLink())}," ",this.props.title);return e&&"info"===e&&(a=this.props.title),e&&"danger"===e&&(a=this.props.title),"error"===this.props.status&&(t=p.a.createElement(p.a.Fragment,null,p.a.createElement(C.a,{variant:"danger"},p.a.createElement(y.a,{icon:j.h})," ",this.props.errorMessage),p.a.createElement(I.a,{variant:"danger"},"Error"))),p.a.createElement(k.a.Item,null,p.a.createElement(f.a,null,p.a.createElement(v.a,{xs:12,sm:9,md:9,ld:9,xl:9},p.a.createElement(S.a.Title,null,this.props.icon?this.props.icon:""," ",a)),p.a.createElement(v.a,{xs:2,sm:1,md:1,ld:1,xl:1},p.a.createElement(S.a.Link,null,p.a.createElement(x.a,{onClick:this.handleEdit,variant:"secondary",size:"sm"},p.a.createElement(y.a,{icon:j.B})))),p.a.createElement(v.a,{xs:2,sm:1,md:1,ld:1,xl:1},p.a.createElement(S.a.Link,null,p.a.createElement(x.a,{onClick:this.handleDelete,variant:"secondary",size:"sm"},p.a.createElement(y.a,{icon:j.N})))),p.a.createElement(v.a,{xs:1,sm:1,md:1,ld:1,xl:1},e&&"info"===e?p.a.createElement(x.a,{variant:"info",size:"sm",disabled:!0},p.a.createElement(T.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"})):"",e&&"danger"===e?p.a.createElement(x.a,{variant:"danger",size:"sm",disabled:!0},p.a.createElement(y.a,{icon:j.h})):"",e&&"success"===e?p.a.createElement(x.a,{variant:"success",size:"sm",disabled:!0},p.a.createElement(y.a,{icon:j.d})):"")),p.a.createElement(f.a,null,p.a.createElement(v.a,{xs:12,sm:12,md:12,ld:12,xl:12},p.a.createElement(S.a.Subtitle,{className:"mb-2 text-muted"},this.props.subtitle))),p.a.createElement(f.a,null,p.a.createElement(v.a,{xs:12,sm:12,md:12,ld:12,xl:12},this.props.sttEngine&&this.props.clipName&&p.a.createElement(O.a,null,p.a.createElement(O.a.Toggle,{as:x.a,variant:"link",eventKey:"0"},p.a.createElement(I.a,{variant:"light"},"Info")),p.a.createElement(O.a.Collapse,{eventKey:"0"},p.a.createElement(p.a.Fragment,null,this.props.sttEngine?p.a.createElement(p.a.Fragment,null,"STT Engine: ",p.a.createElement(I.a,{variant:"light"},this.props.sttEngine)):null,p.a.createElement("br",null),this.props.clipName?p.a.createElement(p.a.Fragment,null,"File Name: ",p.a.createElement(I.a,{variant:"light"},this.props.clipName)):null))))),t?p.a.createElement(p.a.Fragment,null,p.a.createElement(f.a,null,p.a.createElement(v.a,{xs:12,sm:12,md:12,ld:12,xl:12},t))):null)}}]),t}(u.Component),N=a(145),F=a(120),U=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(c.a)(t).call(this,e))).handleSearch=function(e){console.log("searchText",e);var t=a.props.items.filter((function(t){return console.log("transcript",t),t.title&&Object(N.a)(t.title,e)||t.description&&Object(N.a)(t.description,e)||t.clipName&&Object(N.a)(t.clipName,e)||t.sttEngine&&Object(N.a)(t.sttEngine,e)?(t.display=!0,t):(t.display=!1,t)}));a.props.handleUpdateList(t)},a.state={showSearchInput:!1},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e,t,a,n=this;return this.props.items&&(e=this.props.items.map((function(e){return e.display?p.a.createElement(P,{sttEngine:e.sttEngine,clipName:e.clipName,icon:n.props.icon,key:"key__"+e.id,id:e.id,projectId:e.id,title:e.title,subtitle:e.description,handleEdit:n.props.handleEdit,handleDelete:function(){n.props.handleDelete(e.id)},showLink:function(){return n.props.showLinkPath(e.id)},status:e.status,description:void 0,disabled:"done"===e.status,errorMessage:"error"===e.status?e.errorMessage:null}):null})).filter((function(e){return null!==e}))),null!==this.props.items&&0!==this.props.items.length&&(a=p.a.createElement(g.a,{handleSearch:this.handleSearch})),t=null!==this.props.items&&0!==this.props.items.length?p.a.createElement(p.a.Fragment,null,p.a.createElement(k.a,{style:{height:"75vh",overflow:"scroll"}},e)):p.a.createElement("i",null,"No ",this.props.model,", create a new one to get started "),p.a.createElement(p.a.Fragment,null,p.a.createElement(f.a,null,p.a.createElement(v.a,{xs:12,sm:6,md:7,lg:7,xl:7},a),"cep"!==Object(F.a)()?p.a.createElement(p.a.Fragment,null,p.a.createElement(v.a,{xs:12,sm:3,md:2,lg:2,xl:2},p.a.createElement(x.a,{onClick:this.props.handleShowCreateNewItemForm,variant:"secondary",size:"sm",block:!0},"New ",this.props.model)),p.a.createElement(v.a,{xs:12,sm:3,md:3,lg:3,xl:3},p.a.createElement(x.a,{onClick:this.props.handleShowCreateNewBatchForm,variant:"secondary",size:"sm",block:!0},"New Batch ",this.props.model,"s"))):p.a.createElement(v.a,{xs:12,sm:6,md:5,lg:5,xl:5},p.a.createElement(x.a,{onClick:this.props.handleShowCreateNewItemForm,variant:"secondary",size:"sm",block:!0},"New ",this.props.model))),t)}}]),t}(u.Component),L=a(110),D=a(107),A=a(108),M=a(33),B=(a(207),a(121)),_=a.n(B);var z=function(e){return p.a.createElement(M.a,{dismissable:!0,variant:"info",heading:"",message:""},p.a.createElement("b",null," You don't need to convert your media before adding it to the app."),p.a.createElement(D.a.Text,null,p.a.createElement("a",{href:"https://autoedit.gitbook.io/autoedit-3-user-manual/transcriptions/create-a-new-transcription",target:"_blank",rel:"noopener noreferrer"},"see user manual for more details")))},V=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(c.a)(t).call(this,e))).handleTitleChange=function(e){a.setState({title:e.target.value})},a.handleDescriptionChange=function(e){a.setState({description:e.target.value})},a.handleAdobeCepSetFilePath=function(){window.__adobe_cep__.evalScript("$._PPP.get_current_project_panel_selection_absolute_path()",(function(e){console.log("handleAdobeCepSetFilePath"),""!==e?(console.log("handleAdobeCepSetFilePath",e),a.setState({title:_.a.basename(e),adobeCepFilePath:e})):alert("select a clip")}))},a.handleFileUpload=function(e){var t=Array.from(e.target.files)[0],n=new FormData;n.append("file",t,t.name),n.append("type",t.type),t.path&&n.append("path",t.path),a.setState({mediaFileSelected:!0,formData:n}),""===a.state.title&&a.setState({title:t.name})},a.sendRequest=function(){a.setState({uploading:!0});var e=a.state.formData;"cep"!==Object(F.a)()&&(e.append("title",a.state.title),e.append("description",a.state.description),console.log("formData.get('path')",e.get("path")));var t={};"electron"===Object(F.a)()&&(t={title:e.get("title"),description:e.get("description"),path:e.get("path")}),"cep"===Object(F.a)()&&(t={title:a.state.title,description:a.state.description,path:a.state.adobeCepFilePath});try{A.a.createTranscript(a.state.projectId,a.state.formData,t).then((function(e){console.log("ApiWrapper.createTranscript-response ",e),a.setState({uploading:!1,uploadCompleted:!0,redirect:!0,newTranscriptId:e.transcriptId}),a.props.handleSaveForm(e.transcript)})).catch((function(e){console.log("error:::: ",e),a.setState({uploading:!1,redirect:!1,savedNotification:p.a.createElement(M.a,{dismissable:!0,variant:"danger",heading:"Error could not contact the server",message:p.a.createElement("p",null,"There was an error trying to create this transcript on the server")})})}))}catch(n){console.error("error submitting:::",n)}},a.state={projectId:a.props.projectId,validated:!1,redirect:!1,newTranscriptId:null,uploading:!1,uploadCompleted:!1,mediaFileSelected:!1,title:a.props.title,description:a.props.description,id:a.props.id,formData:null,adobeCepFilePath:null,savedNotification:null},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"handleSubmit",value:function(e){var t=e.currentTarget;console.log("(form.checkValidity()",t.checkValidity()),t.checkValidity()||(e.preventDefault(),e.stopPropagation(),this.setState({validated:!0})),t.checkValidity()&&(e.preventDefault(),e.stopPropagation(),this.sendRequest())}},{key:"render",value:function(){var e=this;return p.a.createElement(p.a.Fragment,null,this.state.savedNotification,"electron"===Object(F.a)()&&p.a.createElement(z,null),p.a.createElement(D.a,{noValidate:!0,validated:this.state.validated,onSubmit:function(t){return e.handleSubmit(t)}},"cep"===Object(F.a)()?p.a.createElement(p.a.Fragment,null,p.a.createElement(x.a,{variant:"light",onClick:this.handleAdobeCepSetFilePath,block:!0},"Pick a file"),p.a.createElement(D.a.Text,{className:"text-muted"},"Select an audio or video file to transcribe. Click on a file in the Adobe Premiere project browser window, and the click"," ",p.a.createElement("code",null,"pick a file")," to select a file to transcribe. Then click ",p.a.createElement("code",null,"save")," when you are ready to start the transcriptiion.")):p.a.createElement(D.a.Group,{controlId:"formTranscriptMediaFile"},p.a.createElement(D.a.Control,{required:!0,type:"file",label:"Upload",accept:"audio/*,video/*,.mxf, audio/x-m4a",onChange:this.handleFileUpload}),p.a.createElement(D.a.Text,{className:"text-muted"},"Select an audio or video file to transcribe"),p.a.createElement(D.a.Control.Feedback,null,"Looks good!"),p.a.createElement(D.a.Control.Feedback,{type:"invalid"},"Please chose a audio or video file to transcribe")),p.a.createElement(D.a.Group,{controlId:"formTranscriptTitle"},p.a.createElement(D.a.Label,null,"Title "),p.a.createElement(D.a.Control,{required:!0,type:"text",placeholder:"Enter a transcript title",value:this.state.title,onChange:this.handleTitleChange}),p.a.createElement(D.a.Text,{className:"text-muted"},"Chose a title for your Transcript"),p.a.createElement(D.a.Control.Feedback,null,"Looks good!"),p.a.createElement(D.a.Control.Feedback,{type:"invalid"},"Please chose a title for your transcript")),p.a.createElement(D.a.Group,{controlId:"formTranscriptDescription"},p.a.createElement(D.a.Label,null,"Description "),p.a.createElement(D.a.Control,{type:"text",placeholder:"Enter a Transcript description",value:this.state.description,onChange:this.handleDescriptionChange}),p.a.createElement(D.a.Text,{className:"text-muted"},"Chose an optional description for your Transcript"),p.a.createElement(D.a.Control.Feedback,null,"Looks good!"),p.a.createElement(D.a.Control.Feedback,{type:"invalid"},"Please chose a description for your transcript")),p.a.createElement(L.a.Footer,null,p.a.createElement(x.a,{variant:"primary",type:"submit",disabled:this.state.uploading},"Save"))))}}]),t}(u.Component),W=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(c.a)(t).call(this,e))).handleClose=function(){a.props.handleCloseModal()},a.state={title:"title"},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return p.a.createElement(L.a,{show:this.props.show,onHide:this.handleClose},p.a.createElement(L.a.Header,{closeButton:!0},p.a.createElement(L.a.Title,null,this.props.modalTitle)),p.a.createElement(L.a.Body,null,p.a.createElement(V,{projectId:this.props.projectId,title:this.props.title,description:this.props.description,id:this.props.id,handleSaveForm:this.props.handleSaveForm,handleCloseModal:this.props.handleCloseModal})))}}]),t}(p.a.Component),q=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(c.a)(t).call(this,e))).handleTitleChange=function(e){a.setState({title:e.target.value})},a.handleDescriptionChange=function(e){a.setState({description:e.target.value})},a.handleAdobeCepSetFilePath=function(){window.__adobe_cep__.evalScript("$._PPP.get_current_project_panel_selection_absolute_path()",(function(e){console.log("handleAdobeCepSetFilePath"),""!==e?(console.log("handleAdobeCepSetFilePath",e),a.setState({title:_.a.basename(e),adobeCepFilePath:e})):alert("select a clip")}))},a.handleFileUpload=function(e){var t=Array.from(e.target.files);console.log("files",t);var n=new FormData;t.forEach((function(e,t){n.append("file",e),n.append("type",e.type),e.path&&n.append("path",e.path)})),a.setState({mediaFileSelected:!0,formData:n})},a.sendRequest=function(){a.setState({uploading:!0});var e=a.state.formData.getAll("path"),t={};if("electron"===Object(F.a)()&&e.forEach((function(e){t={title:_.a.basename(e),description:"".concat(_.a.basename(e)),path:e};try{A.a.createTranscript(a.state.projectId,a.state.formData,t).then((function(e){console.log("ApiWrapper.createTranscript-response ",e),a.setState({uploading:!1,uploadCompleted:!0,redirect:!0,newTranscriptId:e.transcriptId}),a.props.handleSaveForm(e.transcript)})).catch((function(e){console.log("error:::: ",e),a.setState({uploading:!1,redirect:!1,savedNotification:p.a.createElement(M.a,{dismissable:!0,variant:"danger",heading:"Error could not contact the server",message:p.a.createElement("p",null,"There was an error trying to create this transcript on the server")})})}))}catch(n){console.error("error submitting:::",n)}})),"browser"===Object(F.a)()){var n=a.state.formData,r=n.getAll("file"),s=n.getAll("type");r.forEach((function(e,t){var n=new FormData;n.append("file",e),n.append("type",s[t]),n.append("title",e.name),n.append("description","");var r={title:e.name,description:""};try{A.a.createTranscript(a.state.projectId,n,r).then((function(e){console.log("ApiWrapper.createTranscript-response ",e),a.setState({uploading:!1,uploadCompleted:!0,redirect:!0,newTranscriptId:e.transcriptId}),a.props.handleSaveForm(e.transcript)})).catch((function(e){console.log("error:::: ",e),a.setState({uploading:!1,redirect:!1,savedNotification:p.a.createElement(M.a,{dismissable:!0,variant:"danger",heading:"Error could not contact the server",message:p.a.createElement("p",null,"There was an error trying to create this transcript on the server")})})}))}catch(i){console.error("error submitting:::",i)}}))}"cep"===Object(F.a)()&&alert("not implemented in adobe CEP")},a.state={projectId:a.props.projectId,validated:!1,redirect:!1,newTranscriptId:null,uploading:!1,uploadCompleted:!1,mediaFileSelected:!1,title:a.props.title,description:a.props.description,id:a.props.id,formData:null,adobeCepFilePath:null,savedNotification:null},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"handleSubmit",value:function(e){var t=e.currentTarget;console.log("form.checkValidity()",t.checkValidity()),t.checkValidity()||(e.preventDefault(),e.stopPropagation(),this.setState({validated:!0})),t.checkValidity()&&(e.preventDefault(),e.stopPropagation(),this.sendRequest())}},{key:"render",value:function(){var e=this;return p.a.createElement(p.a.Fragment,null,this.state.savedNotification,"electron"===Object(F.a)()&&p.a.createElement(z,null),p.a.createElement(D.a,{noValidate:!0,validated:this.state.validated,onSubmit:function(t){return e.handleSubmit(t)}},p.a.createElement(D.a.Group,{controlId:"formTranscriptMediaFile"},p.a.createElement(D.a.Label,null,"Select Files "),p.a.createElement(D.a.Control,{required:!0,type:"file",label:"Upload",accept:"audio/*,video/*,.mxf",multiple:"multiple",onChange:this.handleFileUpload}),p.a.createElement(D.a.Text,{className:"text-muted"},"Select multiple audio or video file to transcribe."),p.a.createElement(D.a.Text,{className:"text-muted"},"This allows you to batch transcribe multiple files, the transcript name will default to the clip name."),p.a.createElement(D.a.Text,{className:"text-muted"},"You can change the default transcript name after you've clicked save."),p.a.createElement(D.a.Text,{className:"text-muted"},"Use command ",p.a.createElement("code",null,"\u2318")," + click or shift ",p.a.createElement("code",null,"\u21e7")," + click to select multiple files."),p.a.createElement(D.a.Control.Feedback,null,"Looks good!"),p.a.createElement(D.a.Control.Feedback,{type:"invalid"},"Please chose a audio or video file to transcribe")),p.a.createElement(L.a.Footer,null,p.a.createElement(x.a,{variant:"primary",type:"submit"},"Save"))))}}]),t}(u.Component),G=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(c.a)(t).call(this,e))).handleClose=function(){a.props.handleCloseModal()},a.state={title:"title"},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return p.a.createElement(L.a,{show:this.props.show,onHide:this.handleClose},p.a.createElement(L.a.Header,{closeButton:!0},p.a.createElement(L.a.Title,null,this.props.modalTitle)),p.a.createElement(L.a.Body,null,p.a.createElement(q,{projectId:this.props.projectId,title:this.props.title,description:this.props.description,id:this.props.id,handleSaveForm:this.props.handleSaveForm,handleCloseModal:this.props.handleCloseModal})))}}]),t}(p.a.Component),K=a(167),R=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(c.a)(t).call(this,e))).componentWillUnmount=function(){a.interval&&clearInterval(a.interval)},a.getTranscripts=function(){var e,t;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.a.awrap(A.a.getTranscripts(a.state.projectId));case 2:(e=n.sent)&&(t=e.transcripts.map((function(e){return e.display=!0,e})),a.setState({projectTitle:e.projectTitle,items:t}));case 4:case"end":return n.stop()}}))},a.areThereTranscriptsInProgress=function(e){return 0!==e.length&&!!e.find((function(e){return"in-progress"===e.status}))},a.handleSaveItem=function(e){console.log("handleSaveItem",e);var t=e;t.display=!0;var n=a.state.items,r=Object(w.a)(n);r.push(t),a.setState({items:r,title:"",itemId:null,description:"",isNewItemModalShow:!1},(function(){console.log("setState")}))},a.handleSaveBatch=function(e){if(console.log("handleSaveBatch",e),a.setState({isNewBatchModalShow:!1}),e.length){var t=e.map((function(e){return e.display=!0,e})),n=a.state.items,r=Object(w.a)(n),s=[].concat(Object(w.a)(r),Object(w.a)(t));a.setState({items:s,title:"",itemId:null,description:"",isNewBatchModalShow:!1},(function(){console.log("setState - itemsProps.length",a.state.isNewBatchModalShow)}))}else{var i=e;i.display=!0;var o=a.state.items,c=Object(w.a)(o);c.push(i),a.setState({items:c,title:"",itemId:null,description:"",isNewItemModalShow:!1},(function(){console.log("setState - single",a.state.isNewBatchModalShow)}))}},a.handleSaveEditedItem=function(e){var t=e;console.log("newEditedITem",t),t.display=!0;var n=a.state.items,r=n.findIndex((function(t){return t.id===e.id})),s=Object(w.a)(n);e.status=s[r].status,s[r]=e;var i=t.id;A.a.updateTranscript(a.state.projectId,i,!1,t).then((function(e){e.ok&&(console.log("ApiWrapper.updateTranscript",e,s),a.setState({items:s,isEditItemModalShow:!1}))}))},a.findItemById=function(e,t){return e.filter((function(e){return e.id===t}))[0]},a.handleEditItem=function(e){var t=a.findItemById(a.state.items,e);a.setState({title:t.title,itemId:t.id,description:t.description,isEditItemModalShow:!0})},a.showLinkPath=function(e){return"/projects/".concat(a.state.projectId,"/transcripts/").concat(e,"/correct")},a.handleUpdateList=function(e){a.setState({items:e})},a.handleShowCreateNewItemForm=function(){a.setState({isNewItemModalShow:!0})},a.handleShowCreateNewBatchForm=function(){console.log("handleShowCreateNewBatchForm"),a.setState({isNewBatchModalShow:!0})},a.handleCloseModal=function(){a.setState({title:"",itemId:null,description:"",isNewItemModalShow:!1})},a.handleCloseBatchModal=function(){a.setState({title:"",itemId:null,description:"",isNewBatchModalShow:!1})},a.handleCloseModalEdit=function(){a.setState({title:"",itemId:null,description:"",isEditItemModalShow:!1})},a.handleUpdateList=function(e){a.setState({items:e,isNewItemModalShow:!1})},a.state={projectId:a.props.projectId,items:[],isNewItemModalShow:!1,isNewBatchModalShow:!1,title:"",description:"",itemId:null,projectTitle:"",isServerError:!1,isEditItemModalShow:!1},a.handleDelete=a.handleDelete.bind(Object(E.a)(a)),a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;return r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:this.getTranscripts(),this.interval=setInterval((function(){console.log("Running interval to check for transcripts"),e.areThereTranscriptsInProgress(e.state.items)&&(console.log("interval: checking transcirpt update"),e.getTranscripts())}),3e4);case 2:case"end":return t.stop()}}),null,this)}},{key:"handleDelete",value:function(e){var t,a,n;return r.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return console.log("handle delete"),s.next=3,r.a.awrap(A.a.deleteTranscript(this.state.projectId,e));case 3:t=s.sent,a=function(t){return t.id!==e},t.ok&&(n=this.state.items.filter((function(e){return a(e)})),this.setState({items:n},(function(){console.log("deleted")})));case 6:case"end":return s.stop()}}),null,this)}},{key:"render",value:function(){return p.a.createElement(p.a.Fragment,null,p.a.createElement(d.a,{style:{marginBottom:"5em",marginTop:"1em"}},p.a.createElement(U,{model:"Transcript",items:this.state.items,handleShowCreateNewItemForm:this.handleShowCreateNewItemForm,handleShowCreateNewBatchForm:this.handleShowCreateNewBatchForm,handleEdit:this.handleEditItem,handleDelete:this.handleDelete,showLinkPath:this.showLinkPath,handleUpdateList:this.handleUpdateList,handleCloseModal:this.handleCloseModal,handleCloseBatchModal:this.handleCloseBatchModal,icon:p.a.createElement(y.a,{icon:j.k,color:"#007bff"})}),p.a.createElement(W,{projectId:this.state.projectId,title:this.state.title,description:this.state.description,id:this.state.itemId,modalTitle:"New Transcript",show:this.state.isNewItemModalShow,handleCloseModal:this.handleCloseModal,handleSaveForm:this.handleSaveItem}),p.a.createElement(G,{projectId:this.state.projectId,title:this.state.title,description:this.state.description,id:this.state.itemId,modalTitle:"New Batch Transcripts",show:this.state.isNewBatchModalShow,handleCloseModal:this.handleCloseBatchModal,handleSaveForm:this.handleSaveBatch}),p.a.createElement(K.a,{title:this.state.title,description:this.state.description,id:this.state.itemId,modalTitle:"Edit Transcript",show:this.state.isEditItemModalShow,handleCloseModal:this.handleCloseModalEdit,handleSaveForm:this.handleSaveEditedItem})))}}]),t}(u.Component),H=a(197),J=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(c.a)(t).call(this,e))).handleSaveItem=function(e){e.id?A.a.updatePaperEdit(a.state.projectId,e.id,e).then((function(t){if("ok"===t.status){var n=t.paperedit;n.display=!0;var r=a.state.items,s=Object(w.a)(r);a.findItemById(r,e),s[r.findIndex((function(e){return e.id===n.id}))]=n,a.setState({isNewItemModalShow:!1,items:s,title:"",itemId:null,description:""})}})):A.a.createPaperEdit(a.state.projectId,e).then((function(e){if("ok"===e.status){var t=Object(w.a)(a.state.items);e.paperedit.display=!0,t.push(e.paperedit),a.setState({isNewItemModalShow:!1,items:t,title:"",itemId:null,description:""})}}))},a.findItemById=function(e,t){return e.filter((function(e){return e.id===t}))[0]},a.handleEditItem=function(e){var t=a.findItemById(a.state.items,e);a.setState({title:t.title,itemId:t.id,description:t.description,isNewItemModalShow:!0})},a.showLinkPath=function(e){return"/projects/".concat(a.state.projectId,"/paperedits/").concat(e)},a.handleUpdateList=function(e){a.setState({items:e})},a.handleShowCreateNewItemForm=function(){a.setState({isNewItemModalShow:!0})},a.handleCloseModal=function(){a.setState({title:"",itemId:null,description:"",isNewItemModalShow:!1})},a.state={projectId:a.props.projectId,items:[],isNewItemModalShow:!1,title:"",description:"",itemId:null},a.handleDeleteItem=a.handleDeleteItem.bind(Object(E.a)(a)),a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e,t;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(A.a.getAllPaperEdits(this.state.projectId));case 2:(e=a.sent)&&(t=e.map((function(e){return e.display=!0,e})),this.setState({items:t}));case 4:case"end":return a.stop()}}),null,this)}},{key:"handleDeleteItem",value:function(e){var t;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(A.a.deletePaperEdit(this.state.projectId,e));case 2:a.sent.ok&&(t=this.state.items.filter((function(t){return t.id!==e})),this.setState({items:t}));case 4:case"end":return a.stop()}}),null,this)}},{key:"render",value:function(){return p.a.createElement(p.a.Fragment,null,p.a.createElement(d.a,{style:{marginBottom:"5em",marginTop:"1em"}},p.a.createElement(H.a,{model:"Paper Edit",items:this.state.items,icon:p.a.createElement(y.a,{icon:j.g,color:"#007bff"}),handleShowCreateNewItemForm:this.handleShowCreateNewItemForm,handleEdit:this.handleEditItem,handleDelete:this.handleDeleteItem,showLinkPath:this.showLinkPath,handleUpdateList:this.handleUpdateList}),p.a.createElement(K.a,{title:this.state.title,description:this.state.description,id:this.state.itemId,modalTitle:this.state.itemId?"Edit Paper Edit":"New Paper Edit",show:this.state.isNewItemModalShow,handleCloseModal:this.handleCloseModal,handleSaveForm:this.handleSaveItem})))}}]),t}(u.Component),Y=function(e){function t(e,a){var n;return Object(s.a)(this,t),(n=Object(o.a)(this,Object(c.a)(t).call(this,e,a))).state={key:"transcripts",projectId:n.props.match.params.projectId,projectName:""},n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e;return r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.a.awrap(A.a.getProject(this.state.projectId));case 2:(e=t.sent)&&this.setState({projectName:e.project.title});case 4:case"end":return t.stop()}}),null,this)}},{key:"render",value:function(){var e=this;return p.a.createElement(p.a.Fragment,null,p.a.createElement(d.a,{style:{marginBottom:"5em",marginTop:"1em"}},p.a.createElement(f.a,null,p.a.createElement(v.a,{sm:12,md:12,ld:12,xl:12},p.a.createElement(b.a,{items:[{name:"Projects",link:"/projects"},{name:this.state.projectName}]}))),p.a.createElement(h.a,{id:"controlled-tab-example",activeKey:this.state.key,onSelect:function(t){return e.setState({key:t})}},p.a.createElement(m.a,{eventKey:"transcripts",title:"Transcripts"},p.a.createElement(R,{projectId:this.state.projectId})),p.a.createElement(m.a,{eventKey:"paperedits",title:"Paper Edits"},p.a.createElement(J,{projectId:this.state.projectId})))))}}]),t}(p.a.Component);t.default=Y}}]);
//# sourceMappingURL=13.87dbda43.chunk.js.map